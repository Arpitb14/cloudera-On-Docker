##################################################################################
## Namenode setup docker file
##
## VERSION		:0.0.1
## DATE			:22Jul2015
##################################################################################

FROM local/hadoop_cloudera_mgr_base:v1
MAINTAINER mystique <b4wt@quantumfoam.uni.me>

# variables
#ENV key val

# http(s)://<Server host>:<port>
# where: <Server host> is the name or IP address of the host machine where the Cloudera Manager Server is installed. 
# <port> is the port configured for the Cloudera Manager Server. The default port is 7180.

# tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log

# Log into the Cloudera Manager Admin Console. The admin user credentials are:
# Username: admin
# Password: admin

RUN cd /etc/yum.repos.d/ && curl -O http://archive.cloudera.com/cdh5/redhat/6/x86_64/cdh/cloudera-cdh5.repo
RUN yum install -y hadoop hadoop-hdfs



========== Ref -==========
dashnam
neuron


Transaction ID: 100000273079276	PNR No 4210121868 - PQWL/8	PQWL/5


d/l nO - TN09 200 500 074 57

Selvaraj DL - TN0920050007457
Umadevi - Voters ID - TPN0315325

	curl -O http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/cloudera-manager.repo
curl -O http://archive.cloudera.com/cdh5/one-click-install/redhat/6/x86_64/cloudera-cdh-5-0.x86_64.rpm
 yum --nogpgcheck localinstall cloudera-cdh-5-0.x86_64.rpm

docker run --dns=172.17.42.1 --hostname=c1 --name=c1 -d busybox sleep 600
docker run -ti --dns=172.17.42.1 \
-h apache_node1 \
--name apache_node1 \
-p 80:80 \
docker.io/httpd:latest /bin/bash

RUN mv /tmp/cloudera-cdh5.repo /etc/yum.repos.d/ && 
yum install -y openssh 
openssh-clients \
java-1.6.0-openjdk-devel \
hadoop \
hadoop-hdfs \
hadoop-mapreduce \
hadoop-yarn \
spark-core



epel-release \
yum-presto \
passwd \
openssh openssh-server \
openssh-clients \
which \
tar \
wget \
rsync \
sudo




yum update --downloadonly epel-release yum-presto  passwd  openssh openssh-server  openssh-clients  which  tar  wget  rsync  sudo

# For already installed packages
yum -y install yum-plugin-downloadonly
yumdownloader --resolve --destdir=/media/sf_dockerRepos/dockerTmp/yum/x86_64/6/base/packages epel-release yum-presto  passwd  openssh openssh-server  openssh-clients  which  tar  wget  rsync  sudo

yum -y install --downloadonly oracle-j2sdk1.7 cloudera-manager-daemons cloudera-manager-server

yum --nogpgcheck localinstall cloudera-manager-daemons-*.rpm
yum --nogpgcheck localinstall cloudera-manager-server-*.rpm
yum --nogpgcheck localinstall cloudera-manager-agent-package.*.x86_64.rpm cloudera-manager-daemons


yum -y install --downloadonly cloudera-manager-agent cloudera-manager-daemons

curl -O http://archive.cloudera.com/cdh5/one-click-install/redhat/6/x86_64/cloudera-cdh-5-0.x86_64.rpm
yum --nogpgcheck localinstall cloudera-cdh-5-0.x86_64.rpm
rpm --import http://archive.cloudera.com/cdh5/redhat/6/x86_64/cdh/RPM-GPG-KEY-cloudera

yum -y install --downloadonly avro-tools crunch flume-ng hadoop-hdfs-fuse hadoop-hdfs-nfs3 hadoop-httpfs hadoop-kms hbase-solr hive-hbase hive-webhcat hue-beeswax hue-hbase hue-impala hue-pig hue-plugins hue-rdbms hue-search hue-spark hue-sqoop hue-zookeeper impala impala-shell kite llama mahout oozie pig pig-udf-datafu search sentry solr-mapreduce spark-python sqoop sqoop2 whirr

Install Cloudera Manager packages from a local repository - sudo ./cloudera-manager-installer.bin --skip_repo_package=1

============